<div class="container-user">
  <div class="user">
    <img src="../../../assets/icon/ghim.png" alt="" class="ghim" />
    <div class="user-default">
      <p>
        <!-- <button (click)="handleChangeAvatar()">Change avatar</button> -->
        <input
          type="file"
          (change)="onFileSelect($event)"
          #avatarImage
          hidden
        />
      </p>
      <p>
        <img
          [src]="
            imageData
              ? 'http://192.168.2.161:8000/images/avatar/' + imageData
              : 'assets/icon/avt.jpg'
          "
          alt=""
        />
        <span
          nz-icon
          nzType="cloud-upload"
          nzTheme="outline"
          (click)="handleChangeAvatar()"
          title="Change Avatar"
          class="avatarChange"
        ></span>
      </p>
      <h2>{{ user?.username }}</h2>
    </div>
    <form class="login-form" [formGroup]="userForm" *ngIf="isEditMode">
      <label for="job">Job:</label>
      <input
        type="text"
        id="job"
        nz-input
        formControlName="job"
        style="width: 100%"
      />
      <div
        class="red-text"
        *ngIf="
          userForm.controls['job'].hasError('required') &&
          userForm.controls['job'].touched
        "
      >
        Is required
      </div>
      <label for="dob">Ngày sinh:</label>
      <input
        type="date"
        formControlName="dob"
        nz-input
        id="job"
        style="display: none"
      />
      <nz-date-picker
        nzPlaceHolder="Vui lòng nhập ngày sinh"
        formControlName="dob"
        [nzDisabledDate]="disabledDate"
        style="width: 100%"
        nzFormat="yyyy-MM-dd"
        (ngModelChange)="onChange($event)"
      ></nz-date-picker>
      <div
        class="red-text"
        *ngIf="
          userForm.controls['dob'].hasError('required') &&
          userForm.controls['dob'].touched
        "
      >
        Is required
      </div>

      <label for="address">Address:</label>
      <input
        type="text"
        id="address"
        nz-input
        formControlName="address"
        style="width: 100%"
      />
      <div
        class="red-text"
        *ngIf="
          userForm.controls['address'].hasError('required') &&
          userForm.controls['address'].touched
        "
      >
        Is required
      </div>
      <label for="tel">Tel:</label>
      <input
        type="text"
        id="tel"
        nz-input
        formControlName="tel"
        style="width: 100%"
      />
      <div
        class="red-text"
        *ngIf="
          userForm.controls['tel'].hasError('required') &&
          userForm.controls['tel'].touched
        "
      >
        Is required
      </div>
      <div
        class="red-text"
        *ngIf="
          userForm.controls['tel'].hasError('pattern') &&
          userForm.controls['tel'].touched
        "
      >
        Số điện thoại không đúng
      </div>
      <button
        nz-button
        type="submit"
        class="mt-16"
        (click)="saveUser()"
        style="width: 470px !important"
        [disabled]="userForm.invalid"
      >
        Submit
      </button>
    </form>
    <div class="login-form" *ngIf="!isEditMode">
      <!-- <label for="job">Job</label>
        <input type="text" disabled [value]="user.job" style="width: 100%" >
      <label for="dob">Ngày sinh</label>
      <input type="text" disabled [value]="user.dob" style="width: 100%" >
      <label for="address">Address</label>
      <input type="text" disabled [value]="user.address" style="width: 100%" >
      <label for="tel">Tel</label>
      <input type="text" disabled [value]="user.tel" style="width: 100%" > -->

      <label for="job">Job:</label>
      <div>{{ user?.job }}</div>
      <label for="dob">Ngày sinh:</label>
      <div>{{ user?.dob }}</div>
      <label for="address">Address:</label>
      <div>{{ user?.address }}</div>
      <label for="tel">Tel:</label>
      <div>{{ user?.tel }}</div>
      <button
        nz-button
        type="submit"
        class="mt-16"
        (click)="toggleEdit()"
        style="width: 470px !important"
        [disabled]="isEditMode"
      >
        Edit
      </button>
    </div>
  </div>
</div>
<div class="container" *ngIf="user?.role === 2">
  <h1>Feedback</h1>
  <div class="feedback-user" nz-row>
    <div
      class="d-flex mb-16"
      *ngFor="let item of listComment"
      nz-col
      [nzSpan]="24"
    >
      <img src="assets/icon/avt.jpg" alt="" />
      <div class="feedback-user-infor ml-16 mr-16 d-flex align-center">
        <div>{{ item?.student_feedback_fk?.username }}</div>
      </div>
      <div class="comment">{{ item?.comment }}</div>
    </div>
    <div class="feedback-user">
      <img src="assets/icon/avt.jpg" alt="" />
      <div class="feedback-user-infor ml-16 mr-16 d-flex align-center">
        <div>{{ currentUser?.username }}</div>
      </div>
      <input
        type="text"
        class="comment"
        style="background-color: '#fff'"
        [(ngModel)]="comment"
        value="Co noi nhanh qua e ko nghe duoc"
      />
      <button
        nz-button
        class="ml-16"
        style="background-color: '#fff'"
        (click)="postComment()"
      >
        Comment
      </button>
    </div>
  </div>
</div>
